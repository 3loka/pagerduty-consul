FROM node:14
WORKDIR /usr/src/app
COPY package.json ./
COPY package-lock.json ./
RUN npm install
COPY . .
ENV POSTGRES_PASSWORD=test 
ENV HCP_ORG=fc064bc9-fc9d-41ee-9e0d-11fb39e059a5
ENV HCP_URL=http://ec2-44-204-175-78.compute-1.amazonaws.com:28081
ENV HCP_JWT=eyJhbGciOiJSUzI1NiIsImtpZCI6ImJhNzY0OTliLTI4NjUtNDZjZC1iNmNkLTRiM2NhMTY5MWQ5NyIsInR5cCI6IkpXVCJ9.eyJhdWQiOlsiaHR0cHM6Ly9hcGkuaGFzaGljb3JwLmNsb3VkIl0sImNsaWVudF9pZCI6ImhjcCIsImV4cCI6MTY4ODYzMjE0MSwiZXh0Ijp7Imh0dHBzOi8vYXV0aC5oYXNoaWNvcnAuY29tL2F1dGgwL2Nvbm5lY3Rpb24vaWQiOiJjb25fY0ZIaXNVaEE1Uzl2QnhDTyIsImh0dHBzOi8vYXV0aC5oYXNoaWNvcnAuY29tL2F1dGgwL2Nvbm5lY3Rpb24vbmFtZSI6IlVzZXJuYW1lLVBhc3N3b3JkLUF1dGhlbnRpY2F0aW9uIiwiaHR0cHM6Ly9hdXRoLmhhc2hpY29ycC5jb20vYXV0aDAvY29ubmVjdGlvbi9zdHJhdGVneSI6ImF1dGgwIiwiaHR0cHM6Ly9hdXRoLmhhc2hpY29ycC5jb20vaWRwIjoiYXV0aDAiLCJodHRwczovL2F1dGguaGFzaGljb3JwLmNvbS9zdWIiOiJhdXRoMHw2NGEyZmViNDAxNDQ1MDE2ZTNhZjVlYmUifSwiaWF0IjoxNjg4NjI4NTQxLCJpc3MiOiJodHRwczovL2dhbmVzaHNlZXRoYXJhbWFuMDEtbDlkOHg1eTkuZGV2LnBlZHAtcmVtb3RlLmhhc2hpY29ycC5zZXJ2aWNlcy8iLCJqdGkiOiJkM2I3YTIwZS01MjEzLTRkZGQtODVhNS02ZjQ0NGYwY2Y5NTEiLCJuYmYiOjE2ODg2Mjg1NDEsInNjcCI6WyJvcGVuaWQiLCJvZmZsaW5lIl0sInN1YiI6IjA3YWQ0NjY0LWY3MTUtNDE3OS1hOTgyLTlhYzU3ZjJmNjY1MiJ9.kGrXclvpKujD6-tL8k1zJfFAbZ77BS9E4IJZPWi2YychlOdfoWbjIgefyfn3iByJ29R84cZVd2GIwsOjAr-Su0Pcflr96teAssYnCZJvpxnIb1il8KU7_SXsBVrihp16zqVqCdrx0bTmaafoaDCRB1yadbXiDFdQhO0g2A9xPPyd4p5XuJ3wWIv9_xuypCJzAKCAQdIlikxHtHz8PF6bfTOXQKXX26uNGBRJPL2u4wrLYl-K-4_v9poSbPEFbcgSyXfExtgvAXHZyLQ5GHhbG5xRIMwyjT4izdbd2xMY0qXCSLmJVs2o8HWApgdkKPXf_jVT34nemrghL0Czf0j8acm0Ij8j-eJW16UByy3lv2XT1QnQidLfo-DVY1bEHtehfwU4WmXqAWnIXJ2qhIWdHbC-xCvWMABQglUZsRBNIpgkyAZ7yNvqJrEhPyj2R_H5DSyWP_G6j_uNN7fFpnXiarU8bLso9nuWDTKvzq21q_YMzM-XKc0YWq1KOH_x43yLeqeEUzC5uDfy9mZ2f6-zuO_BPtZ-LVJ0RssDrSLX-CDGOAVy-m1rne0VWiQlZe8AeMmoSIJnB3sTozR_jSxT6H_LbXwTlKq40jrkSDDhA8iUWK6hgJAg_JOhjQ0L0h5e-S2F6MUZ-b7y3j9TlSIZEyQk0VP9nz3fkfiNGbtJr_g
ENV UI_TOKEN=UIPASS123321$$

CMD [ "node", "backend/app.js" ]
EXPOSE 3000
